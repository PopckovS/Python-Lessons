Области видимости LEGB
---
--- 

Аббревиатура - LEGB
---
**L - local** 

**E - enclosing** 

**G - global** 

**B - built in**

4 области видимости в которых ведется поиск переменной, это в локальной 
области, далее в области видимости функции более высокого уровня если 
она есть, далее в глобальной области, и в конце во встроенной области
`builtin`

Эти встроенные имена находятся в `builtin` области видимости которая 
представляет, из себя файл `builtins.py` это файл где они обьявлены 
и импортированы по дефолту в программы.

---

Области видимости
---
В зависимости от трактовки встречается 2 типа категоризации областей
видимости, либо 3 либо 4 области видимости, где дополнительной еще 
одной областью видимости является область `Built-in` которую по сути 
можно причислить к глобальной области видимости.

1) local - Локальная обл видимости, определяется прямиком внутри 
   своего блока:
   
```python
    var = "Глоб переменная"

    def func():
        var = "Локальная переменная"
        print(var)

    print(var)
    func()

    # Вывод
    # Глоб переменная
    # Локальная переменная
```

Есть 2 переменных, с одним именем, одна локальная другая глобальная.

2) `global` - Глобальная область определяется на верхнем уровне модуля,
   и от туда может быть доступна в локальной области при помощи 
   спец слова `global` после чего значение глоб переменной можно 
   изменять внутри локальной области видимости:
   
   Это любая обычная переменная определенная на глоб уровне, то есть
   переменная на самом верхнем уровне видимости модуля. 


3) `nonlocal` (Enclosing) - Не локальная обл видимости, позволяет выводить
   из лок области видимости в более верхний уровень, но не глобальный 
   уровень, к примеру есть функция в которой определена еще одна функция,
   ключ слово `nonlocal` позволяет внутренней функции выйти на уровень 
   видимости более высокой функции, но она еще не является глобальной:
   
```python
    def func1():
        name = "Первый уровень"
        print(name)

        def func2():
            nonlocal name
            name = "Второй уровень"

        func2()
        print(name)

    func1()

    # Вывод
    # Первый уровень
    # Второй уровень
```

Если внутри функции через global обьявлена переменная, но она не 
перезаписывается, то ее значение остается таким же, каким было изначально. 

```python
   var = "Global"
   
   def def_1():
       global var
       print(var)
   
   print(var)
   def_1()
   print(var)

   # Вывод 
   # Global
   # Global
   # Global
```

4) `builtin` - Встроенная обл видимости которая позволяет использовать 
   стандартный набор классов, эту область еще можно прировнять к глоб обл.
   Сюда входят такие вещи как функция `open()` которые уже встроены в питон,
   и которые можно использовать сразу по дефолту.

---

Функции для работы с обл.видимости `globals()`, `locals()`, `vars()`
---
---

`globals()` - возвращает словарь `dict` глобальных переменных 
и их значений, текущей области.

Таким образом можно получить словарь со всеми переменными в глоб обл 
видимости.

```python
   var = 34
   print(globals())
   
   # Вывод
   # {'__name__': '__main__', 
   #  '__doc__': None, 
   #  '__package__': None,
   #    .
   #    .
   #    .
   #  'var':34
   # }
```
   
`locals()` - Функция выводит словарь со всеми локальными переменными,
что определены в текущей обл видимости.
   
```python
   def func7():
      one = 1
      two = 'два'
      print(locals())
      
   func7()
      
   # Вывод
   # {'two': 'два', 'one': 1}
```

`vars(obj)` - Функция обращается к методу `__dict__` обьекта `obj` 
что передан в нее как аргумент.

Аргумент является не обязательным, если его не передавать то функция 
будет работать как `locals()` или `globals()` в зависимости от того где 
она вызывается, то есть если аргумент не указан то аргументом по 
умолчанию становится обьект текущей обл видимости.
