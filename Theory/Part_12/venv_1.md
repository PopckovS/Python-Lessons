Хранение данных в виртуальном окружении
---
---

Когда мы разрабатываем проект, нам требуется где-то хранить
параметры, подключение к БД, настройки и секретные ключи, 
подобные данные требуется хранить для проекта, но при этом не
комитить их в репозиторий.

Такие настройки можно вынести в директорию `venv` или другую
директорию для хранения виртуального окружения, и подключать
из нее данные уже на своем пк, а сама директория с вирт.окруж
не будет комититься в репозиторий.

Файлы со специальным расширением `.env` предназначены для
хранения перечня переменных окружения.

---

Чем хорошо запускать проект с переменными окружения ?
---

Суть в том что переменные окружения не будут комимиться в 
репу, так же помимо этого когда мы собираем проект в `Docker`
мы можем при сборке указывать переменные окружения, с которыми
будет запускаться контейнер.

---

Запуск конкретной программы с переменными окружения
---

Можно запускать конкретную программу с переменными окружения
установленными специально для этой программы, для этого
переменные окружения перечисляются перед запуском самой
программы.

    TEST_ENV=777 python3 file.py

---

Модуль django-environ
---
По сути можно работать с переменными окружения через модуль
`os.environ` но модуль `django-environ` делает работу проще.

Установка

    pip3 install django-environ

Импорт 

    import environ

В файле настроек `settings.py` пропишем такой код:

```python
import environ
import os

# Создаем экземпляр для работы с переменными окружения
env = environ.Env()

# __file__ это параметр модуля, название самого файла
# os.path.abspath() - получим абсолютный путь к файлу
# os.path.dirname() - дважды поднимаясь на уровень выше
# попадаем в корень директории нашего проекта
BASE_DIR = os.path.dirname(
              os.path.dirname(
                  os.path.abspath(__file__)
              )
            )

# Помещаем файл .env с перечисленными переменными окружения в
# директорию venv c виртуальным окружением, который не комитится в
# репу. Считываем этот файл с настройками с помощью env.read_env()
# и таким образом получаем настройки дял проекта которые не 
# комитятся в репозиторий
path_to_env_file = os.path.join(BASE_DIR, 'venv' , '.env')
env.read_env(path_to_env_file)

# Далее через переменную env можем получать доступ к переменным
# окружения, и тем самым вносить их в наши константы для настройки
# проекта

DEBUG = env('DEBUG')
SECRET_KEY = env('SECRET_KEY')
DATABASES = {
    'default': env.db(),
    'extra': env.db_url(
        'SQLITE_URL',
        default='sqlite:////tmp/my-tmp-sqlite.db'
    )
}

CACHES = {
    'default': env.cache(),
    'redis': env.cache_url('REDIS_URL')
}
```

Таким файлом настроек, мы можем получать доступ к переменным 
окружения, которые лежат в директории с виртуальным окружением,
и которые не будут комититься в репозиторий.

---


