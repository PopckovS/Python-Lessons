Переменные окружения и оболочки в Linux
---
---

Переменные окружения в Linux - это специальные переменные 
используемые программами во время выполнения, они определяются 
как системой, так и пользователем.

Пользовательские переменные окружения устанавливаются 
пользователем, для текущей оболочки, временно или постоянно.

Окружение реализовано как строка, состоящая из пары 
ключ-значение, если определяется несколько значений, то они
последовательно разделены знаком двоеточия. 

    KEY=value1:value2:...

Если значение должно иметь пробелы, то используем кавычки

    KEY="value with spaces"

---

Таким образом мы можем создавать переменные, они могут быть
2 типов:

> 1) Переменные Окружения - переменные, определенные для текущей 
> оболочки, и они наследуются для всех дочерних процессов и всех
> запущенных процессов.
> 
> 
> 2) Переменные Оболочки - это переменные, которые содержатся 
> исключительно в оболочке, где они были определены или 
> установлены.

Эти переменные принято называть с заглавных букв.

---

Список всех переменных окружения можно распечатать командами:

    # Выводит все переменные окружения
    printenv

    # Или выводит указанную переменную окружения
    printenv HOME

    /home/serg

Или командой

    # Выводит все переменные окружения 
    env

В результате получи список всех переменных окружения:

    ...
    PWD=/home/serg
    HOME=/home/serg
    ...

---

Полезные переменные окружения
---
В переменных окружения есть ряд значимых переменных, такие как:

`SHELL` - путь к оболочке что интерпретирует команды /bin/bash

`USER` - текущий пользователь оболочки

`PWD` - текущая директория

`OLDPWD` - преведущая директория

`PATH` - список директорий в которых оболочка будет искать 
команды на выполнение, система проверяет эти директории в
указанном порядке, находит файл со скриптом, что соответствует 
команде и запускает его на выполнение.

`LANG` - текущий язык с кодировкой en_US.UTF-8

`HOME` - домашняя директория текущего пользователя

---

Вывести переменные оболочки можно командой 

    set

---

Создание переменной оболочки
---

Создать переменную оболочки можно простой командой 

     TEST_VAR='Hello World!'

Посмотреть ее можно при помощи выборки, специальная 
команда `| grep` позволяет выбрать нужный результат из массы.

    # Задаем переменную оболочки
    TEST_VAR='Hello World!'

    # Получить из всего вывода set только переменную 
    # с названием TEST_VAR 
    set | grep TEST_VAR

    # идим результат вывода
    TEST_VAR='Hello World!'

Таким образом определенная переменная будет доступна в
текущей сессии терминала, но в дочернем процессе она будет
отсутствовать.

Используем команду `bash` чтобы запустить дочернюю сессию

    # Создаем новую сессию
    bash 

    # Видим что переменной оболочки установленной ранее, нету
    set | grep TEST_VAR

**Таким образом, переменные оболочки существуют только в 
контексте текущей сессии, и не видны в дочерних процессах**

Если нам требуется просто вывести значение переменной, то
можно использовать команду `echo`

    echo $TEST_VAR
    Hello World!

---

Создание переменной окружения
---
Чтобы создать переменную окружения, мы можем командой `export`

    export TEST_VAR
    printenv | grep TEST_VAR
    TEST_VAR=Hello World!
    bash
    echo $TEST_VAR
    Hello World!

**Главное отличие переменной окружения от переменной оболочки,
в том что переменная окружения наследуется в дочерние 
процессы.**

---

Удаление переменной окружения 
---

Сделать это можно такой командой

    export -n TEST_VAR

Или

    unset TEST_VAR

---

Файл `bashrc` с переменными окружения
---

В не зависимости какие переменные окружения или оболочки мы
устанавливаем, все они доступны только в текущей сессии.

И при открытии новой сессии их значения будут обнулены, для
того что бы установить эти значения по умолчанию, что бы они 
были доступны всегда, в каждой сессии.

В домашней директории пользователя, есть файл `bashrc`
с предопределенными переменными окружения.

Добавим в его конец строку

    export VARNAME=value

Теперь эта переменная будет автоматически являться переменной
окружения, при запуске каждой новой сессии.

Для того ято бы изменения вступили в силу сразу же, а не 
после перезапуска, исполним команду

    source ~/.bashrc

Этим указываем использовать в качестве ресурса дял сессии,
файл `bashrc` что находится в домашней директории 
текущего пользователя.
