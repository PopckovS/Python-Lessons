Docker Images
---

В Docker есть изображения, это некоторые образы виртуальных систем,
типа Virtual Box, с набором установленных в них программах.
После сборки образа изменить его уже не получится, придется 
пересобирать заново.

Если на основе изображения был запущен контейнер, то удалить 
изображение без остановки контейнера можно только через силу.

---
Посмотреть изображения докера
---

Посмотреть все изображения можно такой командой:

    docker images



    REPOSITORY   TAG          IMAGE ID       CREATED        SIZE

    web_app      latest       31dd8a363408   15 hours ago   2.81GB
    <none>       <none>       e163ad2e6335   15 hours ago   2.81GB
    python       3.8-buster   85349ca642c4   2 weeks ago    884MB
    redis        alpine       f6f2296798e9   3 weeks ago    32.3MB

У каждого изображения есть уникальный `IMAGE ID` это его `hash`

Если у изображения во время сборки произошла ошибка, то его 
`REPOSITORY` будет в состоянии `<none>`

---
Удалить образ докера
---

Удалить изображение можно при помощи команды:

    docker rmi  <IMAGE ID>

Пример

    docker rmi  31dd8a363408

---
Создание своего образа, с тегом 
---

Создание образа из `Dockerfile`, мы можем создать некоторый проект,
мы можем сгенерировать образ из `Dockerfile`:

    docker build <DOCKERFILE_PATH> --tag <IMAGE_NAME>
    docker build . --tag my_project_tag

`my_project_tag` - мы можем дать этому образу тэг, по сути это имя 
данного образа, то есть образ будет иметь уникальный ID, и мы можем
дать ему еще и имя для простой ориентации между образами.

`.` - путь к директории, где лежит файл Dockerfile собрать из текущего
проекта.

---
Docker Container
---

Из уже собранных образов, можно создавать контейнеры, то есть мы 
берем образ докера и на его основе запускаем миниатюрный Virtual 
Box, в котором можно подкачивать зависимости, устанавливать 
библиотеки, изменять программный код, закачивать в него картинки, 
и прочее ...

После того как контейнер создан он может находиться в 2 состояниях,
он либо остановлен, то есть создан, но не запущен, либо находится в 
работе, то есть к нему можно обратиться через прокинутый порт, можно
войти в запущенный контейнер, провести ряд работ внутри него.

---
Посмотреть докер контейнеры
---

Посмотреть все существующие контейнеры можно

    docker ps -a

    CONTAINER ID   IMAGE          COMMAND                  CREATED        STATUS                      PORTS     NAMES

    9c3786ba438c   web_app        "celery -A config wo…"   15 hours ago   Exited (137) 14 hours ago             celery01
    07a95df7c93b   web_app        "python3 manage.py r…"   15 hours ago   Exited (137) 14 hours ago             web01
    248fec9e7a55   redis:alpine   "docker-entrypoint.s…"   15 hours ago   Exited (137) 14 hours ago             main_redis_1

В `STATUS` показано запущен контейнер или нет, в `PORTS` видим
какой из портов прокинут наружу.


---
Посмотреть запущенные контейнеры
---

Посмотреть только запущенные контейнеры можно командой

    docker ps 

---
Остановка запущенных контейнеров
---

Остановить запущенный контейнер можно командой

    docker stop <CONTAINER ID>
    docker stop 9c3786ba438c

---
Запустить контейнерна основе образа
---

Запустить контейнер на основе образа, можно по его `IMAGE ID`

    docker run <IMAGE ID> 

Пример запуска

    docker run 9c3786ba438c

Запустить контейнер на основе образа и войти в него с командой 
`bash`, есть зайти внутрь контейнера и запустить в нем терминал. 

    docker run <IMAGE ID> -it bash

---
Удалить контейнер
---

Удалить контейнер

    docker rm <CONTAINER ID>

---
Другие команды
---

Удалить все, совсем все ! вобще все

     docker system prune -a
